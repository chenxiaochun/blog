## 什么是并行模式的 React？

在 React18 版本中增加的一个重要理念，就是我们希望开发者在实际开发时，能够不用再去考虑程序的并发性。虽然实现这件事儿，对于 react 这个库的开发者来说，
是一件非常复杂的事情。但我们相信，它对于应用开发者来说，应该是一件非常有用的事情

并行模式，并不是什么新特性。它其实是一套运行于后台的，能够在同一时间点准备好多个版本的 UI 渲染

我们在设计 api 时，就是想能够尽量对开发者隐藏实现细节。作为 react 开发者，只需要尽量关注业务实现，最终的体验由 react 来交付保证

虽然不需要了解它的实现细节。但是，实现并行模式还牵扯改变了 react 的核心渲染模式。因此，从更高维度去对它进行理解，还是非常有意义的

React 并行模式的关键点就是：渲染过程是可以被中断了。在 react18 之前版本中，一旦开始渲染一个同步更新任务，就不可能被中断，一直等到它被渲染完成才行

在并行模式中，就不是这样渲染了。一个任务可以开始渲染，也可以被中断，稍后可以再继续渲染，甚至有可能被完全丢弃。而且，即使任务被中断了，react 也能保证界面的一致性。那为了做到这一点，
react 会等整个虚拟 dom 都构建完成之后，才去更新真实 dom。基于这种能力，react 就可以在不阻塞主线程的情况下，在后台完成新界面的准备渲染工作。这就意味着，即使在对一个非常大的任务进行
渲染时，界面也能够即时的响应用户操作，以达到流畅的用户体验

还有另一种使用场景是关于状态的可复用性。就是 react 会自动将暂时不可见的部分界面进行移除，待回到之前的界面时，再重复利用之前的状态。比如用户进行 tab 切换时。将来，react 中会增加一个新的叫做`<OffsetScreen />`的组件来实现这种模式。这样就可以在后台提前为用户准备好将要渲染的界面了

总之，并行模式在 react 中是一个非常强大的工具。而且像`Suspense`、`transitions`和服务端流式渲染等新特性都依赖于此。对于 react18 来说，这仅仅是一个开始，将来为了实现这个目标，我们还会投入更多努力



